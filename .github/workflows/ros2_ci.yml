jobs:
  ros_ci:
    runs-on: ubuntu-22.04

    strategy:
      fail-fast: false
      matrix:
        ros_distro: [humble]

    steps:
      - name: â¬‡ï¸ Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: âš™ï¸ Setup ROS 2
        uses: ros-tooling/setup-ros@v0.7
        with:
          ros-distro: ${{ matrix.ros_distro }}

      - name: ğŸ—ï¸ Build, Test, and Lint ROS 2 Packages
        uses: ros-tooling/action-ros-ci@v0.4
        with:
          target-ros2-distro: ${{ matrix.ros_distro }}
          rosdep-args: --rosdistro humble --as-root apt:false --verbose

      - name: ğŸ“¦ Upload Logs
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: humble-ci-logs
          path: log/
